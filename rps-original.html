<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title> 
  <meta charset="UTF-8"/>
</head>
<body>
<script>

    const moves = {
        //rock paper scissors rules
        Rock: {weakTo: 'Paper', strongTo: 'Scissors'},
        Paper: {weakTo: 'Scissors', strongTo: 'Rock'},
        Scissors: {weakTo: 'Rock', strongTo: 'Paper'}
    }

    //initialize game
    let rounds = prompt("How many rounds would you like to play?");
    game(parseInt(rounds))

    //chooses computer's move
    function computerPlay() {
        switch (Math.ceil(Math.random()*3)) {
            case 1:
                return "Rock";
            case 2:
                return "Paper";
            case 3:
                return "Scissors";
        }
    }

    function capitalize(str){
      return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
    }

    //plays a round with inputs specified
    function playRound(playerSelection, computerSelection) {
        //correct for case sensitivity
        playerSelection = capitalize(playerSelection);
        //check for tie first
        if (playerSelection === computerSelection){
            return "Tie!";
        } else if (moves[playerSelection].strongTo === computerSelection) {
            return "You win! " + playerSelection + " beats " + computerSelection + ".";
        } else if (moves[playerSelection].weakTo === computerSelection) {
            return "You lose! " + computerSelection + " beats " + playerSelection + ".";
        } else {
            return "Error! playRound function";
        }

    }

    //plays a game with the specified number of rounds
    function game(rounds) {
        //error handling
        if (typeof rounds != 'number'){
            return "Error! game function requres Number.";
        } else if (isFinite(rounds) === false){
            return "Error! Number of rounds must be finite.";
        }
        //tracking wins and losses
        let playerWins = 0;
        let playerLosses = 0;
        let ties = 0;
        //playing specified number of rounds
        for (let i = 0; i < rounds; i++){
            //get user input for move
            let playerSelection = prompt("Rock, paper, or scissors?");
            let fullResult = playRound(playerSelection,computerPlay());
            let result = fullResult;
            //checking for ties
            if (fullResult != "Tie!" && fullResult != "Error! playRound function") {
                let splitString = fullResult.split(" ");
                result = splitString[1];
            } else {
                result = "Tie!";
                ties += 1;
            }
            //adding to win/loss count
            if (result == "win!"){
                playerWins += 1;
            } else if (result == "lose!"){
                playerLosses += 1;
            }
            alert(fullResult);
        }
        // Win/loss conditions
        let message = "";
        
        if (playerWins == playerLosses) {
            message = "Tie game! " + "Wins: " + playerWins + " Losses: " + playerLosses + " Ties: " + ties;
            alert(message);
            console.log(message);
        } else if (playerWins > playerLosses) {
            message = "You won the game! " + "Wins: " + playerWins + " Losses: " + playerLosses + " Ties: " + ties;
            alert(message);
            console.log(message);
        } else if (playerWins < playerLosses) {
            message = "You lost the game! " + "Wins: " + playerWins + " Losses: " + playerLosses + " Ties: " + ties;
            alert(message);
            console.log(message);
        }
        
    }

</script>
</body>
</html>